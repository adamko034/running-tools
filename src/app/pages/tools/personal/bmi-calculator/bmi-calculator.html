<app-tool-view
  [calculatorName]="'TOOLS.BMI_CALCULATOR.TITLE' | translate"
  [calculatorDescription]="'TOOLS.BMI_CALCULATOR.DESCRIPTION' | translate"
  category="personal"
>
  <ng-container tool-title>{{
    'TOOLS.BMI_CALCULATOR.TITLE' | translate
  }}</ng-container>
  <ng-container tool-description>
    {{ 'TOOLS.BMI_CALCULATOR.DESCRIPTION' | translate }}
    <br />
    <div
      class="pl-10"
      [innerHTML]="'TOOLS.BMI_CALCULATOR.DESCRIPTION_2' | translate"
    ></div>
  </ng-container>
  <ng-container tool-content>
    <!-- Responsive Form Grid -->
    <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
      <app-age-store-form-field />
      <app-sex-store-form-field />
      <app-height-store-form-field />
      <app-weight-store-form-field />
    </div>
  </ng-container>

  <ng-container tool-summary>
    <app-fancy-result [transparentValue]="true">
      <div result-title>
        {{ 'TOOLS.BMI_CALCULATOR.RESULT_TITLE' | translate }}
      </div>
      <div result-subtitle>
        {{ 'TOOLS.BMI_CALCULATOR.RESULT_SUBTITLE' | translate }}
      </div>
      <div result-value>
        <!-- Results grid -->
        <div
          class="grid md:grid-cols-2 xl:grid-cols-3 gap-6 place-items-center md:place-items-stretch"
        >
          <ng-container
            *ngTemplateOutlet="
              summary;
              context: { value: bmi, category: bmiCategory, type: 'BMI' }
            "
          ></ng-container>

          <ng-container
            *ngTemplateOutlet="
              summary;
              context: {
                value: bmiHa,
                category: bmiHaCategory,
                type: 'NEW_BMI',
              }
            "
          ></ng-container>

          <ng-container
            *ngTemplateOutlet="
              summary;
              context: {
                value: ibw.ibw.format(),
                category: ibw.category,
                type: 'IBW',
              }
            "
          ></ng-container>

          <ng-container
            *ngTemplateOutlet="
              summary;
              context: { value: fat, category: fatCategory, type: 'BODY_FAT' }
            "
          ></ng-container>

          <ng-container
            *ngTemplateOutlet="
              summary;
              context: {
                value: bmr.bmr.toString() + ' kcal',
                category: bmr.category,
                type: 'BMR',
              }
            "
          ></ng-container>
        </div>
      </div>
    </app-fancy-result>
  </ng-container>

  <!-- Educational Content Section -->
  <ng-container tool-education>
    <div class="mt-8 space-y-6">
      <!-- How to Use Section -->
      <div class="bg-blue-50 p-6 rounded-lg">
        <h2 class="text-xl font-semibold text-gray-900 mb-3">
          {{ 'TOOLS.BMI_CALCULATOR.HOW_TO_USE.TITLE' | translate }}
        </h2>
        <div class="space-y-2 text-gray-700">
          <p
            [innerHTML]="'TOOLS.BMI_CALCULATOR.HOW_TO_USE.STEP1' | translate"
          ></p>
          <p
            [innerHTML]="'TOOLS.BMI_CALCULATOR.HOW_TO_USE.STEP2' | translate"
          ></p>
          <p
            [innerHTML]="'TOOLS.BMI_CALCULATOR.HOW_TO_USE.STEP3' | translate"
          ></p>
          <p
            [innerHTML]="'TOOLS.BMI_CALCULATOR.HOW_TO_USE.STEP4' | translate"
          ></p>
        </div>
      </div>

      <!-- Understanding Results Section -->
      <div class="bg-green-50 p-6 rounded-lg">
        <h2 class="text-xl font-semibold text-gray-900 mb-3">
          {{ 'TOOLS.BMI_CALCULATOR.UNDERSTANDING.TITLE' | translate }}
        </h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div>
            <h3 class="font-medium text-gray-900 mb-2">
              {{
                'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BMI_RANGES.TITLE'
                  | translate
              }}
            </h3>
            <ul class="space-y-1 text-sm text-gray-700">
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BMI_RANGES.UNDERWEIGHT'
                    | translate
                "
              ></li>
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BMI_RANGES.NORMAL'
                    | translate
                "
              ></li>
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BMI_RANGES.OVERWEIGHT'
                    | translate
                "
              ></li>
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BMI_RANGES.OBESE'
                    | translate
                "
              ></li>
            </ul>
          </div>
          <div>
            <h3 class="font-medium text-gray-900 mb-2">
              {{
                'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BODY_FAT.TITLE' | translate
              }}
            </h3>
            <ul class="space-y-1 text-sm text-gray-700">
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BODY_FAT.MALE_RANGES'
                    | translate
                "
              ></li>
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BODY_FAT.FEMALE_RANGES'
                    | translate
                "
              ></li>
              <li
                [innerHTML]="
                  'TOOLS.BMI_CALCULATOR.UNDERSTANDING.BODY_FAT.ATHLETE_NOTE'
                    | translate
                "
              ></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Health Tips Section -->
      <div class="bg-yellow-50 p-6 rounded-lg">
        <h2 class="text-xl font-semibold text-gray-900 mb-3">
          {{ 'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.TITLE' | translate }}
        </h2>
        <div class="space-y-3 text-gray-700">
          <p
            [innerHTML]="'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.INTRO' | translate"
          ></p>
          <div class="grid md:grid-cols-2 gap-4">
            <div>
              <h4 class="font-medium text-gray-900 mb-1">
                {{
                  'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.WEIGHT_MANAGEMENT.TITLE'
                    | translate
                }}
              </h4>
              <ul class="list-disc list-inside space-y-1 ml-4 text-sm">
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.WEIGHT_MANAGEMENT.TIP1'
                      | translate
                  "
                ></li>
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.WEIGHT_MANAGEMENT.TIP2'
                      | translate
                  "
                ></li>
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.WEIGHT_MANAGEMENT.TIP3'
                      | translate
                  "
                ></li>
              </ul>
            </div>
            <div>
              <h4 class="font-medium text-gray-900 mb-1">
                {{
                  'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.RUNNERS.TITLE' | translate
                }}
              </h4>
              <ul class="list-disc list-inside space-y-1 ml-4 text-sm">
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.RUNNERS.TIP1' | translate
                  "
                ></li>
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.RUNNERS.TIP2' | translate
                  "
                ></li>
                <li
                  [innerHTML]="
                    'TOOLS.BMI_CALCULATOR.HEALTH_TIPS.RUNNERS.TIP3' | translate
                  "
                ></li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <!-- Related Tools Section -->
      <div class="bg-purple-50 p-6 rounded-lg">
        <h2 class="text-xl font-semibold text-gray-900 mb-3">
          {{ 'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.TITLE' | translate }}
        </h2>
        <div class="grid md:grid-cols-2 gap-4">
          <div class="space-y-2">
            <a
              href="/tools/personal/burned-calories-estimator"
              class="block p-3 bg-white rounded border hover:border-blue-300 transition-colors"
            >
              <h3 class="font-medium text-blue-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.CALORIES.TITLE'
                    | translate
                }}
              </h3>
              <p class="text-sm text-gray-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.CALORIES.DESC' | translate
                }}
              </p>
            </a>
            <a
              href="/tools/personal/vo2max-calculator"
              class="block p-3 bg-white rounded border hover:border-blue-300 transition-colors"
            >
              <h3 class="font-medium text-blue-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.VO2MAX.TITLE' | translate
                }}
              </h3>
              <p class="text-sm text-gray-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.VO2MAX.DESC' | translate
                }}
              </p>
            </a>
          </div>
          <div class="space-y-2">
            <a
              href="/tools/units/weight-unit-converter"
              class="block p-3 bg-white rounded border hover:border-blue-300 transition-colors"
            >
              <h3 class="font-medium text-blue-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.WEIGHT_CONVERTER.TITLE'
                    | translate
                }}
              </h3>
              <p class="text-sm text-gray-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.WEIGHT_CONVERTER.DESC'
                    | translate
                }}
              </p>
            </a>
            <a
              href="/tools/race/pace-calculator"
              class="block p-3 bg-white rounded border hover:border-blue-300 transition-colors"
            >
              <h3 class="font-medium text-blue-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.PACE_CALC.TITLE'
                    | translate
                }}
              </h3>
              <p class="text-sm text-gray-600">
                {{
                  'TOOLS.BMI_CALCULATOR.RELATED_TOOLS.PACE_CALC.DESC'
                    | translate
                }}>
              </p>
            </a>
          </div>
        </div>
      </div>
    </div>
  </ng-container>

  <!-- FAQ Section -->
  <ng-container tool-faq>
    <app-faq-section>
      <div faq-title>{{ 'TOOLS.BMI_CALCULATOR.FAQ.TITLE' | translate }}</div>

      <div faq-items>
        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q1' | translate }}
          </div>
          <div faq-answer>{{ 'TOOLS.BMI_CALCULATOR.FAQ.A1' | translate }}</div>
        </app-faq-item>

        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q2' | translate }}
          </div>
          <div faq-answer>{{ 'TOOLS.BMI_CALCULATOR.FAQ.A2' | translate }}</div>
        </app-faq-item>

        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q3' | translate }}
          </div>
          <div
            faq-answer
            [innerHTML]="'TOOLS.BMI_CALCULATOR.FAQ.A3' | translate"
          ></div>
        </app-faq-item>

        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q4' | translate }}
          </div>
          <div faq-answer>{{ 'TOOLS.BMI_CALCULATOR.FAQ.A4' | translate }}</div>
        </app-faq-item>

        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q5' | translate }}
          </div>
          <div faq-answer>{{ 'TOOLS.BMI_CALCULATOR.FAQ.A5' | translate }}</div>
        </app-faq-item>

        <app-faq-item>
          <div faq-question>
            {{ 'TOOLS.BMI_CALCULATOR.FAQ.Q6' | translate }}
          </div>
          <div
            faq-answer
            [innerHTML]="'TOOLS.BMI_CALCULATOR.FAQ.A6' | translate"
          ></div>
        </app-faq-item>
      </div>
    </app-faq-section>
  </ng-container>
</app-tool-view>

<ng-template #summary let-value="value" let-category="category" let-type="type">
  <app-fancy-result
    variant="card"
    [colorScheme]="getColorScheme(category)"
    class="w-full"
  >
    <div class="space-y-4">
      <!-- Row 1: Icon and Value in flexible columns -->
      <div class="flex items-center gap-3">
        <!-- Icon column - auto width, left aligned -->
        <div class="flex-shrink-0">
          <div
            class="w-12 h-12 rounded-lg flex items-center justify-center"
            [ngClass]="getIconBackgroundClass(category)"
          >
            <mat-icon class="text-xl" [ngClass]="getIconColorClass(category)">{{
              getIcon(category)
            }}</mat-icon>
          </div>
        </div>

        <!-- Value column - takes remaining space -->
        <div class="flex-1 text-left">
          <div
            class="text-xs font-semibold text-gray-500 uppercase tracking-wider mb-1"
          >
            {{ 'TOOLS.BMI_CALCULATOR.' + type + '.SUMMARY' | translate }}
          </div>
          <div
            class="text-2xl font-bold leading-none"
            [ngClass]="getValueClass(category)"
          >
            {{ value }}
          </div>
        </div>
      </div>

      <!-- Row 2: Category badge spanning full width -->
      <div class="w-full">
        <div
          class="text-xs font-bold px-3 py-1.5 rounded-full shadow-sm text-center w-full"
          [ngClass]="getCategoryBadgeClass(category)"
        >
          {{
            'TOOLS.BMI_CALCULATOR.' + type + '.CATEGORY.' + category | translate
          }}
        </div>
      </div>
    </div>
  </app-fancy-result>
</ng-template>
