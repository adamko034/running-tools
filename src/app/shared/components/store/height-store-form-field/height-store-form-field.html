<app-form-field [horizontalLineText]="'COMMON.HEIGHT' | translate">
  @if (isMetric()) {
    <!-- Modern Metric Height Input -->
    <div class="relative group w-32">
      <div
        class="flex items-center bg-white/80 backdrop-blur-sm rounded-xl border shadow-sm hover:shadow-md transition-all duration-200 focus-within:ring-2"
        [class]="
          isValid()
            ? 'border-slate-200/60 focus-within:ring-slate-300/50 focus-within:border-slate-300'
            : 'border-red-300 focus-within:ring-red-300/50 focus-within:border-red-400'
        "
      >
        <!-- Height Input -->
        <div class="flex-1 relative">
          <input
            type="number"
            min="0.1"
            step="0.1"
            [ngModel]="height().value"
            name="heightStore"
            (ngModelChange)="onMetricHeightChange($event)"
            (input)="onMetricInput($event)"
            selectOnFocus
            class="w-full px-3 py-2.5 pr-8 bg-transparent border-0 focus:outline-none focus:ring-0 text-base font-medium text-center"
            [class]="
              isValid()
                ? 'text-slate-900 placeholder-slate-400'
                : 'text-red-700 placeholder-red-400'
            "
            placeholder="0.0"
          />

          <!-- Unit Display -->
          <div
            class="absolute right-2 top-1/2 -translate-y-1/2 text-sm font-medium"
            [class]="isValid() ? 'text-slate-500' : 'text-red-500'"
          >
            {{ height().unit }}
          </div>
        </div>
      </div>

      <!-- Validation Error Message -->
      @if (!isValid() && errorMessage()) {
        <div class="mt-1 text-sm text-red-600 font-medium text-center">
          {{ errorMessage() | translate }}
        </div>
      }
    </div>
  } @else {
    <!-- Modern Imperial Height Input -->
    <div class="relative group w-48">
      <div
        class="flex items-center bg-white/80 backdrop-blur-sm rounded-xl border shadow-sm hover:shadow-md transition-all duration-200 focus-within:ring-2"
        [class]="
          isValid()
            ? 'border-slate-200/60 focus-within:ring-slate-300/50 focus-within:border-slate-300'
            : 'border-red-300 focus-within:ring-red-300/50 focus-within:border-red-400'
        "
      >
        <!-- Feet -->
        <div class="w-20 relative">
          <input
            type="number"
            min="0"
            step="1"
            [ngModel]="feet"
            name="heightStoreFeet"
            (ngModelChange)="onImperialHeightChange($event, 'ft')"
            (input)="onImperialInput($event, 'ft')"
            selectOnFocus
            class="w-full px-2 py-2.5 pr-6 bg-transparent border-0 focus:outline-none focus:ring-0 text-base font-medium text-center"
            [class]="
              isValid()
                ? 'text-slate-900 placeholder-slate-400'
                : 'text-red-700 placeholder-red-400'
            "
            placeholder="0"
          />
          
          <!-- Unit Display -->
          <div class="absolute right-1 top-1/2 -translate-y-1/2 text-sm font-medium"
               [class]="isValid() ? 'text-slate-500' : 'text-red-500'">
            ft
          </div>
        </div>

        <!-- Separator -->
        <div
          class="text-lg font-light px-1"
          [class]="isValid() ? 'text-slate-400' : 'text-red-400'"
        >
          '
        </div>

        <!-- Inches -->
        <div class="w-20 relative">
          <input
            type="number"
            min="0"
            max="11"
            step="1"
            [ngModel]="inches"
            name="heightStoreInches"
            (ngModelChange)="onImperialHeightChange($event, 'in')"
            (input)="onImperialInput($event, 'in')"
            selectOnFocus
            class="w-full px-2 py-2.5 pr-6 bg-transparent border-0 focus:outline-none focus:ring-0 text-base font-medium text-center"
            [class]="
              isValid()
                ? 'text-slate-900 placeholder-slate-400'
                : 'text-red-700 placeholder-red-400'
            "
            placeholder="0"
          />
          
          <!-- Unit Display -->
          <div class="absolute right-1 top-1/2 -translate-y-1/2 text-sm font-medium"
               [class]="isValid() ? 'text-slate-500' : 'text-red-500'">
            in
          </div>
        </div>
      </div>

      <!-- Validation Error Message -->
      @if (!isValid() && errorMessage()) {
        <div class="mt-1 text-sm text-red-600 font-medium text-center">
          {{ errorMessage() | translate }}
        </div>
      }
    </div>
  }
</app-form-field>
